---
class: chapter
---

# Amazon GuardDutyを使ったことない人､最初の一歩を踏み出そう｡

<div class="flush-right">
戸井田 理 @ryder472
</div>

## Amazon GuardDutyとは？

Amazon GuardDutyをご存知でしょうか。AWSが提供するセキュリティサービスの一つで、様々なサービスから取得されるメタデータなどを情報源として脅威を検知することができます。  
「脅威を検出することができる」と言っても、具体的にどのような機能があるのか分かりにくいかもしれませんので、簡単にまとめてみます。  

* 基本機能
  * CloudTrail管理イベント分析
  * VPCフローログ、DNSクエリログ分析
* 拡張機能
  * S3プロテクション
  * EKSプロテクション
  * ランタイムモニタリング (EC2、EKS、ECS)
  * マルウェアプロテクション (EBS、S3)
  * RDSプロテクション
  * Lambda保護

多くの機能がありますが、選び方は簡単です。基本機能はGuardDutyを有効化すると自動で有効になりますが、拡張機能は必要に応じて有効化することができます。  
例えば、LambdaとS3を使っているため関連する機能を有効化したいが、他のサービスは利用していない場合、不要な機能を有効化せずに利用できます。  
料金面でも、サードパーティの類似サービスと比較して、かなりリーズナブルな設定になっています。  
執筆時点では30日間の無料期間があるので、有効化してコスト感を確認してみることをお勧めします。<span class="footnote">https://aws.amazon.com/jp/guardduty/pricing/</span>

### どんな機能がおすすめ？

拡張機能の「マルウェアプロテクション (S3)」がおすすめです。これはS3にアップロードされたオブジェクトをスキャンしてくれるサービスで、2024年にGA（一般提供開始）されました。この機能により、別途コンピュートリソースを用意することなく、オブジェクトをスキャンできます。  
この機能は、2025年2月1日から価格が85%引き下げられ、非常に手頃に利用できるサービスとなりました。  
S3を使って外部とファイルをやり取りするような場合には、有効化を検討しましょう。

### どういう人におすすめ？

AWSアカウントを利用するすべての人におすすめです。GuardDutyを使うことで、AWSアカウントへの不審なアクティビティを検知し、リソースの保護に繋げることができます。  
もちろん、このサービスを有効化するだけで全てのセキュリティ問題が解決するわけではありませんので、あくまで対策の一つとして活用しましょう。

## 有効化した後にやるべきこと

検知した脅威を通知させるためには、GuardDutyから出力される各種イベントを元に、Amazon EventBridgeを使用して各環境に合わせた対応を設定しましょう。  
また、AWSが提供する他のセキュリティサービスとの連携も可能です。例えば、AWS Security Hubに検出結果を集約させることができます。

### 注意事項

GuardDutyは、あくまで脅威を「検知」する機能です。修復や通知を自動的に行うものではないということを必ず理解してください。  
また、各種設定を行った後も、最終的にファイルやリソースが安全であるかどうかの責任は利用者にあります。この責任をAWSに転嫁できるものではありません。

#### 著者紹介
---

<div class="author-profile">
    <img src="images/ryder472.jpg">
    <div>
        <div>
            <b>戸井田 理 </b><br>
            Twitter､Instagram､Misskey.io: <a>@ryder472</a><br>
            Zenn: <a>https://zenn.dev/ryder472</a><br>
        </div>
    </div>
</div>
<p style="margin-top: 0.5em; margin-bottom: 2em;">
バックエンドエンジニア､好きな言語はRubyとTypeScript｡ JAWS-UG 茨城運営
</p>
